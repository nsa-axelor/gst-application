<?xml version="1.0" encoding="UTF-8"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views
  http://axelor.com/xml/ns/object-views/object-views_5.2.xsd">

  <grid model="com.axelor.apps.gst.db.Invoice" title="Invoice Grid"
    name="invoice-grid">
    <field name="statusSelect" />
    <field name="company" />
    <field name="reference" />
    <field name="invoiceDateT" />
    <field name="priority" />
    <field name="party" />
    <field name="partyContact" />
    <field name="invoiceAddress" />
    <field name="shippingAddress" />
    <field name="isUseInvoiceAddressAsShipping" />
    <field name="netAmount" />
    <field name="netIgst" />
    <field name="netCsgt" />
    <field name="netSgst" />
    <field name="grossAmount" />
    <field name="invoiceItemList" />
  </grid>

  <form model="com.axelor.apps.gst.db.Invoice" title="Invoice Form"
    name="invoice-form" onNew="action-gst-record-set-default-values">
    <panel>
      <panel colSpan="8">
        <field name="statusSelect" widget="NavSelect" colSpan="12" />
      </panel>
      <panel colSpan="4">
        <button name="ValidatedBtn" colSpan="12"
          onClick="action-gst-group-select-validated-status"
          title="Validate" showIf="statusSelect=='draft'" />
        <button name="PaidBtn" colSpan="12"
          onClick="action-gst-record-select-paid-status" title="Paid"
          showIf="statusSelect=='draft' || statusSelect == 'validated'" />
          <!--TODO: Cancel RED -->
        <button name="CancelledBtn" colSpan="12" css="background-color:#f00;"
          onClick="action-gst-record-select-cancelled-status" title="Cancel"
          showIf="statusSelect=='draft' || statusSelect == 'validated'" />
      </panel>
    </panel>
    <panel>

      <field name="reference" colSpan="6" />
      <field name="isUseInvoiceAddressAsShipping" colSpan="6" onChange="action-gst-method-change-shipping-address-from-party"/>
      <field name="company" />
      <field name="invoiceDateT" />
      <field name="priority" />
      <field name="party" onChange="action-gst-method-set-values-from-party"/>
      <field name="partyContact" />
      <field name="invoiceAddress" />
      <field name="shippingAddress" />
      <field name="invoiceItemList" colSpan="12" form-view="invoice-line-from" grid-view="invoice-line-grid"/>
    </panel>

    <panel>
      <field name="netAmount" />
      <field name="netIgst" />
      <field name="netCsgt" />
      <field name="netSgst" />
      <field name="grossAmount" />
    </panel>
  </form>

  <action-method name="action-gst-method-set-values-from-party">
    <call class="com.axelor.apps.gst.web.InvoiceController" method="setPartyPrimaryContact"/>
  </action-method>

  <action-method name="action-gst-method-change-shipping-address-from-party">
    <call class="com.axelor.apps.gst.web.InvoiceController" method="changeShippingAddress"/>
  </action-method>

  <action-record name="action-gst-record-set-default-values" model="com.axelor.apps.gst.db.Invoice">
    <field name="invoiceDateT" expr="eval: __datetime__"/>
    <field name="company" expr="Axelor"/>
    <field name="party" expr="Party-Test"/>
  </action-record>

  <action-group name="action-gst-group-select-validated-status">
    <action name="action-gst-record-select-validated-status"/>
    <action name="action-gst-method-generate-reference-from-sequence"/>
  </action-group>

  <action-method name="action-gst-method-generate-reference-from-sequence">
    <call class="com.axelor.apps.gst.web.InvoiceController" method="generateNewSequence"/>
  </action-method>

  <action-record
    name="action-gst-record-select-draft-status"
    model="com.axelor.apps.gst.db.Invoice">
    <field name="statusSelect" expr="draft" />
  </action-record>

  <action-record
    name="action-gst-record-select-validated-status"
    model="com.axelor.apps.gst.db.Invoice">
    <field name="statusSelect" expr="validated" />
  </action-record>

  <action-record
    name="action-gst-record-select-paid-status"
    model="com.axelor.apps.gst.db.Invoice">
    <field name="statusSelect" expr="paid" />
  </action-record>

  <action-record
    name="action-gst-record-select-cancelled-status"
    model="com.axelor.apps.gst.db.Invoice">
    <field name="statusSelect" expr="cancelled" />
  </action-record>

</object-views>
